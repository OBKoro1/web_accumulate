{"remainingRequest":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/obkoro1/work/web_my/web_accumulate/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/obkoro1/work/web_my/web_accumulate/docs/accumulate/effect/浏览器桌面通知.md?vue&type=template&id=29aa11f8&","dependencies":[{"path":"/Users/obkoro1/work/web_my/web_accumulate/docs/accumulate/effect/浏览器桌面通知.md","mtime":1547202837411},{"path":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/obkoro1/work/web_my/web_accumulate/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"content\"><h2 id=\"浏览器桌面通知\"><a class=\"header-anchor\" href=\"#浏览器桌面通知\" aria-hidden=\"true\">#</a> 浏览器桌面通知</h2>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/notification\" target=\"_blank\" rel=\"noopener noreferrer\">MDN<OutboundLink/></a></p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">notifyMe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 先检查浏览器是否支持</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Notification'</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This browser does not su pport desktop notification'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 检查用户是否同意接受通知</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If it's okay let's create a notification</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'检查同意'</span><span class=\"token punctuation\">,</span> Notification<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> notification <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1token吹牛大牛-李胜!'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      body<span class=\"token punctuation\">:</span> <span class=\"token string\">'这里是body'</span><span class=\"token punctuation\">,</span>\n      icon<span class=\"token punctuation\">:</span>\n        <span class=\"token string\">'https://user-gold-cdn.xitu.io/2017/12/22/1607d2bb387d545d?imageView2/1/w/180/h/180/q/85/format/webp/interlace/1'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">'denied'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//  否则我们需要向用户获取权限</span>\n    Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>permission<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 如果用户同意，就可以向他们发送通知</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'同意回调'</span><span class=\"token punctuation\">,</span> permission<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> notification <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1token吹牛大牛-李胜!'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          body<span class=\"token punctuation\">:</span> <span class=\"token string\">'这里是body'</span><span class=\"token punctuation\">,</span>\n          tag<span class=\"token punctuation\">:</span> <span class=\"token string\">'通知id'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 通知id，用以替换、刷新、移除的时候用</span>\n          icon<span class=\"token punctuation\">:</span>\n            <span class=\"token string\">'https://user-gold-cdn.xitu.io/2017/12/22/1607d2bb387d545d?imageView2/1/w/180/h/180/q/85/format/webp/interlace/1'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> notification <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1token吹牛大牛-李胜!'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      body<span class=\"token punctuation\">:</span> <span class=\"token string\">'这里是body'</span><span class=\"token punctuation\">,</span>\n      tag<span class=\"token punctuation\">:</span> <span class=\"token string\">'通知id'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 通知id，用以替换、刷新、移除的时候用</span>\n      icon<span class=\"token punctuation\">:</span>\n        <span class=\"token string\">'https://user-gold-cdn.xitu.io/2017/12/22/1607d2bb387d545d?imageView2/1/w/180/h/180/q/85/format/webp/interlace/1'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 最后，如果执行到这里，说明用户已经拒绝对相关通知进行授权</span>\n  <span class=\"token comment\">// 出于尊重，我们不应该再打扰他们了</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">notifyMe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br><span class=\"line-number\">23</span><br><span class=\"line-number\">24</span><br><span class=\"line-number\">25</span><br><span class=\"line-number\">26</span><br><span class=\"line-number\">27</span><br><span class=\"line-number\">28</span><br><span class=\"line-number\">29</span><br><span class=\"line-number\">30</span><br><span class=\"line-number\">31</span><br><span class=\"line-number\">32</span><br><span class=\"line-number\">33</span><br><span class=\"line-number\">34</span><br><span class=\"line-number\">35</span><br><span class=\"line-number\">36</span><br><span class=\"line-number\">37</span><br><span class=\"line-number\">38</span><br><span class=\"line-number\">39</span><br><span class=\"line-number\">40</span><br><span class=\"line-number\">41</span><br></div><!--beforeend--></div><!--afterend--><h3 id=\"鼓励我一下：\"><a class=\"header-anchor\" href=\"#鼓励我一下：\" aria-hidden=\"true\">#</a> 鼓励我一下：</h3>\n<p>觉得还不错的话，给我的项目点个<a href=\"https://github.com/OBKoro1/Brush_algorithm\" target=\"_blank\" rel=\"noopener noreferrer\">star<OutboundLink/></a>吧</p>\n<p><a href=\"http://obkoro1.com/\" target=\"_blank\" rel=\"noopener noreferrer\">博客<OutboundLink/></a>、<a href=\"https://github.com/OBKoro1/Brush_algorithm\" target=\"_blank\" rel=\"noopener noreferrer\">前端算法<OutboundLink/></a>、<a href=\"https://user-gold-cdn.xitu.io/2018/5/1/1631b6f52f7e7015?w=344&amp;h=344&amp;f=jpeg&amp;s=8317\" target=\"_blank\" rel=\"noopener noreferrer\">公众号<OutboundLink/></a></p>\n</div>\n",null]}