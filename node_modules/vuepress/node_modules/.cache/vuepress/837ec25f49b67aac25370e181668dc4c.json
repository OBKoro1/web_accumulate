{"remainingRequest":"/Users/koro/work/web_my/web_accumulate/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/koro/work/web_my/web_accumulate/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/koro/work/web_my/web_accumulate/docs/accumulate/effect/网页全屏.md?vue&type=template&id=4b2c5f58&","dependencies":[{"path":"/Users/koro/work/web_my/web_accumulate/docs/accumulate/effect/网页全屏.md","mtime":1636107879469},{"path":"/Users/koro/work/web_my/web_accumulate/node_modules/cache-loader/dist/cjs.js","mtime":1557296864520},{"path":"/Users/koro/work/web_my/web_accumulate/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1557296867191},{"path":"/Users/koro/work/web_my/web_accumulate/node_modules/cache-loader/dist/cjs.js","mtime":1557296864520},{"path":"/Users/koro/work/web_my/web_accumulate/node_modules/vue-loader/lib/index.js","mtime":1557296867190},{"path":"/Users/koro/work/web_my/web_accumulate/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1557296867284}],"contextDependencies":[],"result":["\n<div class=\"content\"><h2 id=\"全屏模式轻松掌握-局部元素全屏展示\"><a class=\"header-anchor\" href=\"#全屏模式轻松掌握-局部元素全屏展示\" aria-hidden=\"true\">#</a> 全屏模式轻松掌握[局部元素全屏展示]</h2>\n<p>我第一次对网页全屏模式有概念，是那种网页播放视频的全屏播 放的那种。感觉很强，前几个星期有个需求也是关于全屏模式的，接触之后才知道全屏模式并不神秘，是个很容易掌握的技能...</p>\n<blockquote>\n<p><a href=\"http://obkoro1.com/\" target=\"_blank\" rel=\"noopener noreferrer\">博客<OutboundLink/></a>、<a href=\"http://obkoro1.com/web_accumulate/accumulate/\" target=\"_blank\" rel=\"noopener noreferrer\">前端积累文档<OutboundLink/></a>、<a href=\"https://github.com/OBKoro1/articleImg_src/blob/master/juejin/1631b6f52f7e7015.jpeg?raw=true\" target=\"_blank\" rel=\"noopener noreferrer\">公众号<OutboundLink/></a>、<a href=\"https://github.com/OBKoro1\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub<OutboundLink/></a></p>\n</blockquote>\n<h3 id=\"codepen-demo\"><a class=\"header-anchor\" href=\"#codepen-demo\" aria-hidden=\"true\">#</a> CodePen Demo</h3>\n<p>地址：<a href=\"https://codepen.io/OBKoro1/full/wQmOzG/\" target=\"_blank\" rel=\"noopener noreferrer\">演示<OutboundLink/></a>、<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">code<OutboundLink/></a></p>\n<p>进去看看，玩一下，本文将结合这个demo一起进行讲解。</p>\n<p><img src=\"https://github.com/OBKoro1/articleImg_src/blob/master/juejin/167690a2a5a9ba2c?raw=true\" alt=\"\"></p>\n<h3 id=\"全屏功能封装在一个类里面：\"><a class=\"header-anchor\" href=\"#全屏功能封装在一个类里面：\" aria-hidden=\"true\">#</a> 全屏功能封装在一个类里面：</h3>\n<p>我把全屏模式封装在一个类里面，在代码中有详细的注释，如果有需要的话，直接把类拿出来，根据栗子和注释使用即可。</p>\n<p>代码在<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">codepen<OutboundLink/></a>的demo里。</p>\n<h3 id=\"何谓全屏？\"><a class=\"header-anchor\" href=\"#何谓全屏？\" aria-hidden=\"true\">#</a> 何谓全屏？</h3>\n<p><strong>MDN介绍</strong>：</p>\n<p>使用提供的API，让一个元素与其子元素，可以占据整个屏幕，并在此期间，从屏幕上隐藏所有的浏览器用户界面以及其他应用。</p>\n<p><strong>chrome下的全屏表现</strong>：</p>\n<ol>\n<li>\n<p><strong>全屏会隐藏标签栏,书签栏</strong></p>\n</li>\n<li>\n<p>如果网页一开始不是全部撑开的形式，全屏下，也会<strong>将要全屏的元素充满整个屏幕</strong></p>\n</li>\n<li>\n<p><strong>可以多层全屏</strong>，如栗子中一样，可以先左边全屏，然后红色全屏。</p>\n<p>在这种情况下退出全屏，只会退出红色全屏，退回到左边全屏的形式，所以页面依然是全屏模式。</p>\n</li>\n<li>\n<p>进入全屏时，有一个<strong>默认的提示</strong>：'按esc即可退出全屏模式'，如下图显示：</p>\n<p><img src=\"https://github.com/OBKoro1/articleImg_src/blob/master/juejin/167694f2253893bf?raw=true\" alt=\"\"></p>\n</li>\n<li>\n<p>当按<code>Esc</code>或调用退出全屏方法，退出全屏。<strong>标签栏和书签栏依然是隐藏的，网页上的元素恢复成原本的尺寸</strong>。</p>\n<p>要显示书签栏和标签栏，需要刷新一下页面。</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"全屏api：\"><a class=\"header-anchor\" href=\"#全屏api：\" aria-hidden=\"true\">#</a> 全屏API：</h2>\n<p><strong>总共用到6个API</strong>：</p>\n<ol>\n<li>浏览器是否支持全屏模式：<code>document.fullscreenEnabled</code></li>\n<li>使元素进入全屏模式：<code>Element.requestFullscreen()</code></li>\n<li>退出全屏：<code>document.exitFullscreen()</code></li>\n<li>检查当前是否有节点处于全屏状态：<code>document.fullscreenElement</code></li>\n<li>进入全屏/离开全屏，触发事件：<code>document.fullscreenchange</code></li>\n<li>无法进入全屏时触发: <code>document.fullscreenerror</code></li>\n</ol>\n<h3 id=\"浏览器前缀：\"><a class=\"header-anchor\" href=\"#浏览器前缀：\" aria-hidden=\"true\">#</a> 浏览器前缀：</h3>\n<p>目前并不是所有的浏览器都实现了API的无前缀版本，所以我们需要针对不同浏览器，做一下API的兼容:</p>\n<p>这是我在<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">demo<OutboundLink/></a>中做的浏览器兼容：</p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token comment\">/**\n * @description: 是否支持全屏+判断浏览器前缀\n * @param {Function} fn 不支持全屏的回调函数 这里设了一个默认值\n */</span>\n<span class=\"token function\">isFullscreen</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> fullscreenEnabled<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 判断浏览器前缀</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>fullscreenEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fullscreenEnabled <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>fullscreenEnabled<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>webkitFullscreenEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fullscreenEnabled <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>webkitFullscreenEnabled<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName <span class=\"token operator\">=</span> <span class=\"token string\">'webkit'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>mozFullScreenEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fullscreenEnabled <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>mozFullScreenEnabled<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName <span class=\"token operator\">=</span> <span class=\"token string\">'moz'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>msFullscreenEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fullscreenEnabled <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>msFullscreenEnabled<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName <span class=\"token operator\">=</span> <span class=\"token string\">'ms'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fullscreenEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fn <span class=\"token operator\">!==</span> undefined<span class=\"token punctuation\">)</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 执行不支持全屏的回调</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFullscreenData <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br><span class=\"line-number\">23</span><br><span class=\"line-number\">24</span><br></div><!--beforeend--></div><!--afterend--><p>我在实例化的时候进行一次判断浏览器是否支持全屏，然后<strong>保存浏览器前缀</strong>。</p>\n<p>推荐这么做，因为如果每个API都要这样重复的判断浏览器前缀，那也太恶心了！</p>\n<h3 id=\"_1-浏览器是否支持全屏模式：document-fullscreenenabled\"><a class=\"header-anchor\" href=\"#_1-浏览器是否支持全屏模式：document-fullscreenenabled\" aria-hidden=\"true\">#</a> 1. 浏览器是否支持全屏模式：document.fullscreenEnabled</h3>\n<p><code>document.fullscreenEnabled</code>属性返回一个布尔值，表示当前文档是否可以切换到全屏状态。</p>\n<p>代码在上方浏览器前缀代码中给出了。</p>\n<p><strong>如果没有保存浏览器前缀的话，注意做一下不同浏览器前缀的兼容！下面不再强调</strong>。</p>\n<h3 id=\"_2-使元素进入全屏模式：element-requestfullscreen\"><a class=\"header-anchor\" href=\"#_2-使元素进入全屏模式：element-requestfullscreen\" aria-hidden=\"true\">#</a> 2. 使元素进入全屏模式：Element.requestFullscreen()</h3>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token comment\">/**\n * @description: 将传进来的元素全屏\n * @param {String} domName 要全屏的dom名称\n */</span>\n<span class=\"token function\">Fullscreen</span><span class=\"token punctuation\">(</span>domName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>domName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取dom</span>\n  <span class=\"token keyword\">const</span> methodName <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName <span class=\"token operator\">===</span> <span class=\"token string\">''</span>\n      <span class=\"token operator\">?</span> <span class=\"token string\">'requestFullscreen'</span>\n      <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">RequestFullScreen`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// API前缀</span>\n  element<span class=\"token punctuation\">[</span>methodName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用全屏</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br></div><!--beforeend--></div><!--afterend--><p>这就是我们<strong>实现全屏的API</strong>，是不是超简单？</p>\n<p>值得注意的是：<strong>调用此API并不能保证元素一定能够进入全屏模式</strong></p>\n<ol>\n<li>\n<p>MDN：例如<code>&lt;iframe&gt;</code> 元素具有 allowfullscreen 属性，可选择是否将其内容以全屏模式显示</p>\n<p>这种不被允许全屏的元素属于极少数情况，我试过可以将<code>button</code>全屏。</p>\n</li>\n<li>\n<p>全屏请求必须在事件处理函数(<code>点击事件等</code>)中调用，否则将会被拒绝。</p>\n<p>在<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">demo<OutboundLink/></a>中有演示,初始化直接全屏，会触发进入全屏失败回调。</p>\n</li>\n</ol>\n<h3 id=\"_3-退出全屏：document-exitfullscreen\"><a class=\"header-anchor\" href=\"#_3-退出全屏：document-exitfullscreen\" aria-hidden=\"true\">#</a> 3. 退出全屏：document.exitFullscreen()</h3>\n<p><strong>介绍</strong>：</p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token function\">exitFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> methodName <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName <span class=\"token operator\">===</span> <span class=\"token string\">''</span>\n      <span class=\"token operator\">?</span> <span class=\"token string\">'exitFullscreen'</span>\n      <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ExitFullscreen`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// API 前缀</span>\n  document<span class=\"token punctuation\">[</span>methodName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br></div><!--beforeend--></div><!--afterend--><p>调用这个方法会让文档回退到上一个调用Element.requestFullscreen()方法进入全屏模式之前的状态。</p>\n<p><strong>多层全屏</strong></p>\n<p>像<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">demo<OutboundLink/></a>中，先进入左边全屏，再进入红色全屏，即为：多层全屏的情况(虽然这种情况并不多)。</p>\n<p><strong>当出现多层全屏的情况，需要一层层的退出到页面最初始的情况</strong>，并不是调用一次<code>document.exitFullscreen()</code>就恢复到页面最初始的样子。</p>\n<h3 id=\"_4-检查当前是否有节点处于全屏状态：document-fullscreenelement\"><a class=\"header-anchor\" href=\"#_4-检查当前是否有节点处于全屏状态：document-fullscreenelement\" aria-hidden=\"true\">#</a> 4. 检查当前是否有节点处于全屏状态：document.fullscreenElement</h3>\n<p>fullscreenElement属性返回正处于全屏状态的Element节点，如果当前没有节点处于全屏状态，则返回null</p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token comment\">/**\n * @description: 检测有没有元素处于全屏状态\n * @return 布尔值\n */</span>\n<span class=\"token function\">isElementFullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> fullscreenElement <span class=\"token operator\">=</span>\n    document<span class=\"token punctuation\">.</span>fullscreenElement <span class=\"token operator\">||</span>\n    document<span class=\"token punctuation\">.</span>msFullscreenElement <span class=\"token operator\">||</span>\n    document<span class=\"token punctuation\">.</span>mozFullScreenElement <span class=\"token operator\">||</span>\n    document<span class=\"token punctuation\">.</span>webkitFullscreenElement<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 有前缀的f是大写，没前缀是小写</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fullscreenElement <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 当前没有元素在全屏状态</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 有元素在全屏状态</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br></div><!--beforeend--></div><!--afterend--><p>事实上，还有一个属性<code>document.fullscreen</code>，返回一个布尔值，表示文档是否处于全屏模式。</p>\n<p>两个方法效果是一样，但因为IE不支持这个属性，所以这里用的是<code>document.fullscreenElement</code></p>\n<h3 id=\"_5-进入全屏-离开全屏，触发事件：document-fullscreenchange\"><a class=\"header-anchor\" href=\"#_5-进入全屏-离开全屏，触发事件：document-fullscreenchange\" aria-hidden=\"true\">#</a> 5. 进入全屏/离开全屏，触发事件：document.fullscreenchange</h3>\n<p>当我们进入全屏和离开全屏的时候，都会触发一个<code>fullscreenchange</code>事件。</p>\n<p><strong><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Fullscreen_API#%E9%80%9A%E7%9F%A5\" target=\"_blank\" rel=\"noopener noreferrer\">MDN注意<OutboundLink/></a>：此事件不会提供任何信息，表明是进入全屏或退出全屏</strong>。</p>\n<p>看了好久事件返回的信息，确实找不到一个值，表明这是在进入全屏，或者离开全屏！</p>\n<p>可以说相当不人性化了！但我们可以通过检查当前是否有节点处于全屏状态，判断当前是否处于全屏模式。</p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token comment\">/**\n * @description: 监听进入/离开全屏\n * @param {Function} enter 进入全屏的回调\n *  @param {Function} quit 离开全屏的回调\n */</span>\n<span class=\"token function\">screenChange</span><span class=\"token punctuation\">(</span>enter<span class=\"token punctuation\">,</span>quit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFullscreenData<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> methodName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`on</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">fullscreenchange`</span></span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">[</span>methodName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> e <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isElementFullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      enter <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">enter</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 进入全屏回调</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      quit <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">quit</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 离开全屏的回调</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br></div><!--beforeend--></div><!--afterend--><p><strong>注意：多层全屏的情况</strong></p>\n<ol>\n<li>先进入左边全屏(进入全屏回调)，再进入红色全屏(进入全屏回调)</li>\n<li>退出全屏,此时退出红色全屏，左边仍是全屏(触发进入全屏回调)</li>\n<li>出现这种情况，可以在点击按钮的时候，做一些状态限制。或者根据全屏事件返回的dom信息来进行判断。</li>\n</ol>\n<h3 id=\"_6-无法进入全屏时触发-document-fullscreenerror\"><a class=\"header-anchor\" href=\"#_6-无法进入全屏时触发-document-fullscreenerror\" aria-hidden=\"true\">#</a> 6. 无法进入全屏时触发: document.fullscreenerror</h3>\n<p>进入全屏并不总是成功的，可能是技术原因，也可能是用户拒绝，我们在上文进入全文的API<code>Element.requestFullscreen()</code>部分讲过了。</p>\n<p>比如全屏请求不是在事件处理函数中调用,会在这里拦截到错误</p>\n<!--beforebegin--><div class=\"language-js line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token comment\">/**\n * @description: 浏览器无法进入全屏时触发\n * @param {Function} enterErrorFn 回调\n */</span>\n<span class=\"token function\">screenError</span><span class=\"token punctuation\">(</span>enterErrorFn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> methodName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`on</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prefixName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">fullscreenerror`</span></span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">[</span>methodName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> e <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    enterErrorFn <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">enterErrorFn</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br></div><!--beforeend--></div><!--afterend--><h3 id=\"css：-全屏模式下的样式\"><a class=\"header-anchor\" href=\"#css：-全屏模式下的样式\" aria-hidden=\"true\">#</a> Css： 全屏模式下的样式</h3>\n<p><strong>chorme 70 下的默认会为正在全屏的dom添加两个class：稍微看一下</strong></p>\n<ol>\n<li>默认设置黑色背景</li>\n</ol>\n<!--beforebegin--><div class=\"language-css line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-css\"><code><span class=\"token selector\">:not(:root):-webkit-full-screen::backdrop</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> black<span class=\"token punctuation\">;</span> // 会将背景设为黑色的 如果你没为你的dom设置背景的话，全屏下会为黑色\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br></div><!--beforeend--></div><!--afterend--><ol start=\"2\">\n<li>默认样式：</li>\n</ol>\n<!--beforebegin--><div class=\"language-css line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-css\"><code><span class=\"token selector\">:not(:root):-webkit-full-screen</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">object-fit</span><span class=\"token punctuation\">:</span> contain<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> none <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">min-height</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">max-height</span><span class=\"token punctuation\">:</span> none <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100% <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100% <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> none <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0px <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br></div><!--beforeend--></div><!--afterend--><p><strong>全屏状态的CSS：</strong></p>\n<p>全屏状态下，大多数浏览器的CSS支持:full-screen伪类，只有IE11支持:fullscreen伪类。使用这个伪类，可以对全屏状态设置单独的CSS属性。</p>\n<p>以下css摘自阮一峰老师的<a href=\"https://javascript.ruanyifeng.com/htmlapi/fullscreen.html#toc0\" target=\"_blank\" rel=\"noopener noreferrer\">Fullscreen API：全屏操作<OutboundLink/></a></p>\n<!--beforebegin--><div class=\"language-css line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-css\"><code><span class=\"token comment\">/* 针对dom的全屏设置 */</span>\n<span class=\"token selector\">.div:-webkit-full-screen</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* 全屏属性 */</span>\n<span class=\"token selector\">:-webkit-full-screen</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">:-moz-full-screen</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token selector\">:-ms-fullscreen</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* 全屏伪类 当前chrome:70 不支持 */</span>\n<span class=\"token selector\">:full-screen</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">:fullscreen</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* IE11支持 */</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br></div><!--beforeend--></div><!--afterend--><hr>\n<h2 id=\"结语\"><a class=\"header-anchor\" href=\"#结语\" aria-hidden=\"true\">#</a> 结语</h2>\n<p>我们可以把全屏技术应用在H5游戏、信息流网站、视频等地方，下次再有全屏需求时，记住不要慌，回头看看过本文的<a href=\"https://codepen.io/OBKoro1/pen/wQmOzG\" target=\"_blank\" rel=\"noopener noreferrer\">栗子<OutboundLink/></a>，把我封装的类拿出来直接用就可以啦！</p>\n<p>以上2018.12.1</p>\n<p>参考资料：</p>\n<p><a href=\"https://javascript.ruanyifeng.com/htmlapi/fullscreen.html#toc7\" target=\"_blank\" rel=\"noopener noreferrer\">Fullscreen API：全屏操作<OutboundLink/></a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Fullscreen_API\" target=\"_blank\" rel=\"noopener noreferrer\">MDN<OutboundLink/></a>\n<!-- 特殊字符串：用于修改/删除markdown的结尾提示语-OBKoro1 --></p>\n<h3 id=\"点个star支持我一下\"><a class=\"header-anchor\" href=\"#点个star支持我一下\" aria-hidden=\"true\">#</a> 点个<a href=\"https://github.com/OBKoro1/web_accumulate\" target=\"_blank\" rel=\"noopener noreferrer\">Star<OutboundLink/></a>支持我一下~</h3>\n<!-- '特殊字符串：用于删除编译后的issue组件-OBKoro1 -->\n<!-- more -->\n<comment-comment/>\n</div>\n",null]}